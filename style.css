/* ===================== RESET & BASE ===================== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #060810;
  --surface: #0d1117;
  --border: rgba(0,210,255,0.15);
  --x-color: #ff3864;
  --x-glow: rgba(255,56,100,0.5);
  --o-color: #00d2ff;
  --o-glow: rgba(0,210,255,0.5);
  --accent: #f0f0ff;
  --muted: rgba(240,240,255,0.35);
  --grid-color: rgba(0,210,255,0.08);
  --font-main: 'Orbitron', monospace;
  --font-body: 'Rajdhani', sans-serif;
}

html, body {
  height: 100%;
  background: var(--bg);
  color: var(--accent);
  font-family: var(--font-body);
  overflow: hidden;
}

/* ===================== BACKGROUND ===================== */
.bg-grid {
  position: fixed;
  inset: 0;
  background-image:
    linear-gradient(var(--grid-color) 1px, transparent 1px),
    linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
  background-size: 40px 40px;
  z-index: 0;
  pointer-events: none;
}

.scanline {
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(
    to bottom,
    transparent 0px,
    transparent 3px,
    rgba(0,0,0,0.08) 3px,
    rgba(0,0,0,0.08) 4px
  );
  z-index: 1;
  pointer-events: none;
}

/* ===================== CONTAINER ===================== */
.container {
  position: relative;
  z-index: 10;
  width: 100%;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ===================== SCREENS ===================== */
.screen {
  display: none;
  flex-direction: column;
  align-items: center;
  gap: 24px;
  width: 100%;
  max-width: 480px;
  padding: 20px;
  animation: screenIn 0.4s ease;
}
.screen.active { display: flex; }

@keyframes screenIn {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ===================== LOGO ===================== */
.logo {
  font-family: var(--font-main);
  font-size: clamp(28px, 8vw, 52px);
  font-weight: 900;
  letter-spacing: 0.15em;
  display: flex;
  gap: 10px;
  align-items: center;
}
.logo-tic { color: var(--x-color); text-shadow: 0 0 20px var(--x-glow), 0 0 40px var(--x-glow); }
.logo-tac { color: var(--accent); text-shadow: 0 0 20px rgba(240,240,255,0.4); }
.logo-toe { color: var(--o-color); text-shadow: 0 0 20px var(--o-glow), 0 0 40px var(--o-glow); }
.logo-dot { color: var(--muted); font-size: 0.5em; }

.tagline {
  font-family: var(--font-main);
  font-size: 11px;
  letter-spacing: 0.3em;
  color: var(--muted);
}

/* ===================== MENU BUTTONS ===================== */
.menu-buttons {
  display: flex;
  gap: 16px;
  width: 100%;
  margin-top: 16px;
}

.btn {
  font-family: var(--font-main);
  cursor: pointer;
  border: none;
  outline: none;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.btn-pvp, .btn-bot {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 24px 16px;
  background: var(--surface);
  border: 1px solid var(--border);
  color: var(--accent);
  position: relative;
  overflow: hidden;
}
.btn-pvp::before, .btn-bot::before {
  content: '';
  position: absolute;
  inset: 0;
  opacity: 0;
  transition: opacity 0.3s;
}
.btn-pvp::before { background: linear-gradient(135deg, rgba(255,56,100,0.1), transparent); }
.btn-bot::before { background: linear-gradient(135deg, rgba(0,210,255,0.1), transparent); }
.btn-pvp:hover::before, .btn-bot:hover::before { opacity: 1; }
.btn-pvp:hover { border-color: var(--x-color); box-shadow: 0 0 20px var(--x-glow), inset 0 0 20px rgba(255,56,100,0.05); transform: translateY(-2px); }
.btn-bot:hover { border-color: var(--o-color); box-shadow: 0 0 20px var(--o-glow), inset 0 0 20px rgba(0,210,255,0.05); transform: translateY(-2px); }
.btn-pvp.selected { border-color: var(--x-color); box-shadow: 0 0 30px var(--x-glow); }
.btn-bot.selected { border-color: var(--o-color); box-shadow: 0 0 30px var(--o-glow); }

.btn-icon { font-size: 28px; }
.btn-label { font-size: 14px; font-weight: 700; letter-spacing: 0.15em; }
.btn-sub { font-family: var(--font-body); font-size: 12px; color: var(--muted); letter-spacing: 0.08em; }

/* ===================== DIFFICULTY ===================== */
.difficulty-panel {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
  animation: screenIn 0.3s ease;
}
.difficulty-label {
  font-family: var(--font-main);
  font-size: 10px;
  letter-spacing: 0.35em;
  color: var(--muted);
}
.diff-buttons {
  display: flex;
  gap: 10px;
}
.diff-btn {
  font-family: var(--font-main);
  font-size: 11px;
  letter-spacing: 0.15em;
  padding: 10px 20px;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--muted);
  border-radius: 3px;
  cursor: pointer;
  transition: all 0.2s;
}
.diff-btn:hover { border-color: var(--o-color); color: var(--o-color); }
.diff-btn.active { border-color: var(--o-color); color: var(--o-color); background: rgba(0,210,255,0.08); box-shadow: 0 0 12px var(--o-glow); }

.btn-start {
  font-size: 12px;
  letter-spacing: 0.25em;
  padding: 14px 40px;
  background: linear-gradient(135deg, var(--o-color), #0099cc);
  color: var(--bg);
  font-weight: 700;
  border-radius: 3px;
  box-shadow: 0 0 20px var(--o-glow);
  transition: all 0.2s;
}
.btn-start:hover { transform: scale(1.03); box-shadow: 0 0 35px var(--o-glow); }

.hidden { display: none !important; }

/* ===================== GAME HEADER ===================== */
.game-header {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.back-btn {
  font-family: var(--font-main);
  font-size: 10px;
  letter-spacing: 0.2em;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--muted);
  padding: 8px 14px;
  border-radius: 3px;
  cursor: pointer;
  transition: all 0.2s;
}
.back-btn:hover { border-color: var(--accent); color: var(--accent); }
.mode-badge {
  font-family: var(--font-main);
  font-size: 10px;
  letter-spacing: 0.3em;
  color: var(--o-color);
  border: 1px solid rgba(0,210,255,0.3);
  padding: 6px 14px;
  border-radius: 3px;
  background: rgba(0,210,255,0.06);
}

/* ===================== SCOREBOARD ===================== */
.score-board {
  width: 100%;
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 8px;
  align-items: center;
}
.score-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 14px 10px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 4px;
  transition: all 0.3s;
}
.score-card.active-turn { border-color: rgba(240,240,255,0.3); }
#score-x.active-turn { border-color: var(--x-color); box-shadow: 0 0 18px rgba(255,56,100,0.3); }
#score-o.active-turn { border-color: var(--o-color); box-shadow: 0 0 18px rgba(0,210,255,0.3); }
.score-symbol {
  font-size: 22px;
  font-weight: 900;
  font-family: var(--font-main);
  line-height: 1;
}
.x-symbol { color: var(--x-color); text-shadow: 0 0 12px var(--x-glow); }
.o-symbol { color: var(--o-color); text-shadow: 0 0 12px var(--o-glow); }
.score-name { font-size: 10px; letter-spacing: 0.1em; color: var(--muted); font-family: var(--font-main); }
.score-num { font-size: 28px; font-family: var(--font-main); font-weight: 700; }
.score-draws { display: flex; flex-direction: column; align-items: center; gap: 4px; }
.score-draws .score-num { font-size: 20px; color: var(--muted); }
.score-draws .score-name { font-size: 9px; letter-spacing: 0.1em; color: var(--muted); font-family: var(--font-main); }

/* ===================== TURN INDICATOR ===================== */
.turn-indicator {
  font-family: var(--font-main);
  font-size: 11px;
  letter-spacing: 0.25em;
  color: var(--muted);
  padding: 8px 20px;
  border: 1px solid var(--border);
  border-radius: 3px;
  background: var(--surface);
  transition: all 0.3s;
}
.turn-indicator.thinking {
  border-color: var(--o-color);
  color: var(--o-color);
  box-shadow: 0 0 14px rgba(0,210,255,0.3);
  animation: pulse 0.8s infinite alternate;
}
@keyframes pulse { from { opacity: 0.7; } to { opacity: 1; } }

/* ===================== BOARD ===================== */
.board {
  position: relative;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 3px;
  width: min(340px, 90vw);
  height: min(340px, 90vw);
  background: rgba(0,210,255,0.08);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 3px;
  box-shadow: 0 0 40px rgba(0,210,255,0.05);
}

.cell {
  background: var(--surface);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: clamp(36px, 10vw, 68px);
  font-family: var(--font-main);
  font-weight: 900;
  transition: background 0.15s, box-shadow 0.15s;
  position: relative;
  overflow: hidden;
  user-select: none;
}
.cell::after {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(255,255,255,0.03);
  opacity: 0;
  transition: opacity 0.15s;
}
.cell:hover:not(.taken)::after { opacity: 1; }
.cell:hover:not(.taken) { background: #141a24; }
.cell.taken { cursor: default; }

.cell.x {
  color: var(--x-color);
  text-shadow: 0 0 14px var(--x-glow), 0 0 28px var(--x-glow);
  animation: cellPop 0.25s cubic-bezier(0.17, 0.67, 0.45, 1.6);
}
.cell.o {
  color: var(--o-color);
  text-shadow: 0 0 14px var(--o-glow), 0 0 28px var(--o-glow);
  animation: cellPop 0.25s cubic-bezier(0.17, 0.67, 0.45, 1.6);
}
.cell.winning {
  background: #0a1018;
}
.cell.x.winning { box-shadow: inset 0 0 20px rgba(255,56,100,0.25); }
.cell.o.winning { box-shadow: inset 0 0 20px rgba(0,210,255,0.25); }

@keyframes cellPop {
  0%   { transform: scale(0.5); opacity: 0; }
  70%  { transform: scale(1.1); }
  100% { transform: scale(1); opacity: 1; }
}

/* ===================== WIN LINE ===================== */
.win-line {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 10;
}
.win-line line {
  stroke: var(--accent);
  stroke-width: 3;
  stroke-linecap: round;
  stroke-dasharray: 400;
  stroke-dashoffset: 400;
  filter: drop-shadow(0 0 6px var(--accent));
}
.win-line.draw-x line { stroke: var(--x-color); filter: drop-shadow(0 0 8px var(--x-glow)); }
.win-line.draw-o line { stroke: var(--o-color); filter: drop-shadow(0 0 8px var(--o-glow)); }
.win-line.animate line { animation: drawLine 0.45s ease forwards; }
@keyframes drawLine { to { stroke-dashoffset: 0; } }

/* ===================== RESULT BANNER ===================== */
.result-banner {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
  animation: screenIn 0.35s ease;
}
.result-text {
  font-family: var(--font-main);
  font-size: clamp(16px, 5vw, 24px);
  font-weight: 900;
  letter-spacing: 0.2em;
  text-align: center;
}
.result-text.win-x { color: var(--x-color); text-shadow: 0 0 20px var(--x-glow); }
.result-text.win-o { color: var(--o-color); text-shadow: 0 0 20px var(--o-glow); }
.result-text.draw { color: var(--muted); }

.btn-rematch {
  font-size: 12px;
  letter-spacing: 0.25em;
  padding: 12px 36px;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--accent);
  font-weight: 700;
  border-radius: 3px;
  transition: all 0.2s;
}
.btn-rematch:hover {
  border-color: var(--accent);
  background: rgba(240,240,255,0.06);
  box-shadow: 0 0 18px rgba(240,240,255,0.15);
  transform: scale(1.03);
}

/* ===================== RESPONSIVE ===================== */
@media (max-width: 400px) {
  .logo { gap: 6px; }
  .menu-buttons { flex-direction: column; }
  .btn-pvp, .btn-bot { flex-direction: row; gap: 14px; padding: 18px 20px; }
}
